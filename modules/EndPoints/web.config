<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>

    <!-- SERVICES -->
    <services>
      <service name="Demo.Services.UserService">
        <endpoint address="http://localhost:8080/UserService"
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttp_NoSecurity"
                  contract="Demo.Contracts.IUserService" />

        <endpoint address="https://localhost:8443/UserServiceSecure"
                  binding="wsHttpBinding"
                  bindingConfiguration="WsHttp_WithCert"
                  contract="Demo.Contracts.IUserService" />

        <endpoint address="net.tcp://localhost:9001/UserServiceTcp"
                  binding="netTcpBinding"
                  bindingConfiguration="NetTcp_NoSecurity"
                  contract="Demo.Contracts.IUserService" />

        <endpoint address="net.pipe://localhost/UserServicePipe"
                  binding="netNamedPipeBinding"
                  contract="Demo.Contracts.IUserService" />

        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange" />
      </service>

      <service name="Demo.Services.PaymentService">
        <endpoint address="https://localhost:8443/PaymentService"
                  binding="wsHttpBinding"
                  bindingConfiguration="WsHttp_WithCert"
                  contract="Demo.Contracts.IPaymentService" />

        <endpoint address="net.tcp://localhost:9002/PaymentServiceTcp"
                  binding="netTcpBinding"
                  bindingConfiguration="NetTcp_WithMessage"
                  contract="Demo.Contracts.IPaymentService" />

        <endpoint address="http://localhost:8081/PaymentService"
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttp_Empty"
                  contract="Demo.Contracts.IPaymentService" />
      </service>

      <service name="Demo.Services.CustomSecureService">
        <endpoint address="https://localhost:9443/CustomSecureService"
                  binding="customBinding"
                  bindingConfiguration="CustomCertBinding"
                  contract="Demo.Contracts.ISecureService" />
      </service>

      <service name="Demo.Services.ExternalProbes">
        <endpoint address="https://www.google.com/"
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttp_Empty"
                  contract="Demo.Contracts.IGoogleMock" />

        <endpoint address="https://postman-echo.com/get"
                  binding="basicHttpBinding"
                  bindingConfiguration="BasicHttp_Empty"
                  contract="Demo.Contracts.IPostmanEchoMock" />
      </service>
    </services>

    <!-- CLIENT ENDPOINTS -->
    <client>
      <endpoint address="https://www.google.com/"
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttp_Empty"
                contract="Demo.Contracts.IGoogle"
                name="GoogleSearch" />

      <endpoint address="https://postman-echo.com/get"
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttp_NoSecurity"
                contract="Demo.Contracts.IPostmanEcho"
                name="PostmanTest" />

      <endpoint address="net.tcp://localhost:9003/InventoryService"
                binding="netTcpBinding"
                bindingConfiguration="NetTcp_NoSecurity"
                contract="Demo.Contracts.IInventoryService"
                name="InventoryTcp" />

      <endpoint address="http://intranet/legacyService"
                binding="basicHttpBinding"
                contract="Demo.Contracts.ILegacyService"
                name="LegacyNoBindingConfig" />
    </client>

    <!-- BINDING DEFINITIONS -->
    <bindings>
      <!-- BASIC HTTP -->
      <basicHttpBinding>
        <binding name="BasicHttp_NoSecurity">
          <security mode="None" />
        </binding>
        <binding name="BasicHttp_Empty">
          <!-- Intentionally left empty to simulate default security mode -->
        </binding>
      </basicHttpBinding>

      <!-- WS HTTP -->
      <wsHttpBinding>
        <binding name="WsHttp_WithCert">
          <security mode="Transport">
            <transport clientCredentialType="Certificate" />
          </security>
        </binding>
      </wsHttpBinding>

      <!-- NET TCP -->
      <netTcpBinding>
        <binding name="NetTcp_NoSecurity">
          <security mode="None" />
        </binding>
        <binding name="NetTcp_WithMessage">
          <security mode="Message">
            <message clientCredentialType="Windows" />
          </security>
        </binding>
      </netTcpBinding>

      <!-- CUSTOM -->
      <customBinding>
        <binding name="CustomCertBinding">
          <security defaultAlgorithmSuite="Default"
                    authenticationMode="MutualCertificate"
                    requireDerivedKeys="true"
                    includeTimestamp="true"
                    securityHeaderLayout="Strict" />
          <textMessageEncoding messageVersion="Soap11" />
          <httpsTransport />
        </binding>
      </customBinding>
    </bindings>

    <!-- BEHAVIORS -->
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

  </system.serviceModel>
</configuration>
